# Use, modification, and distribution are
# subject to the Boost Software License, Version 1.0. (See accompanying
# file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
#
# Copyright Rene Rivera 2015-2017.

 
image:
  - Visual Studio 2017
  - Visual Studio 2015
  - Visual Studio 2013

environment:
  DEBUG_BATCH: "1"
  matrix:
  - TEST_ALL_EXTRAS:

build_script:
- cmd: |
    set > set.log

    bootstrap.bat

test_script:
- ps: |
    cd test
    
    python test_all.py msvc $env:TEST_ALL_EXTRAS --preserve

on_finish:
  - ps: >-
      cd $env:APPVEYOR_BUILD_FOLDER

      Get-Item *.log | %{ Push-AppveyorArtifact $_.FullName}
      
      if (Test-Path 'test\failed_test')
      {
          & 7z a failed_test.zip 'test\failed_test\*'
          Push-AppveyorArtifact failed_test.zip
      }
